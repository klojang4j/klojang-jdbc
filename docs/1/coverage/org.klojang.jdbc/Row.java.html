<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Row.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SQL Templates</a> &gt; <a href="index.source.html" class="el_package">org.klojang.jdbc</a> &gt; <span class="el_source">Row.java</span></div><h1>Row.java</h1><pre class="source lang-java linenums">package org.klojang.jdbc;

import org.klojang.check.Check;
import org.klojang.convert.Bool;
import org.klojang.convert.NumberMethods;
import org.klojang.templates.RenderSession;

import java.sql.ResultSet;
import java.util.*;
import java.util.function.Function;

import static org.klojang.check.CommonChecks.*;
import static org.klojang.util.ObjectMethods.ifNotNull;

public class Row {

  private static final String ERR0 = &quot;No such column: \&quot;%s\&quot;&quot;;
  private static final String ERR1 = &quot;Column %s not convertible to %s: %s&quot;;
  private static final String ERR2 = &quot;Invalid column number: %d&quot;;
  private static final String ERR3 = &quot;Columns already exists: %d&quot;;

  private final Map&lt;String, Object&gt; map;

  /**
   * Creates a new {@code Row} from the data in the specified map.
   *
   * @param data The data for the {@code Row}.
   */
  public Row(Map&lt;String, Object&gt; data) {
<span class="nc" id="L30">    this(data, 0);</span>
<span class="nc" id="L31">  }</span>

  /**
   * Creates a new {@code Row} from the data in the specified map. The specified
   * extra capacity is reserved for the addition of new &quot;columns&quot; (i.e. map keys).
   * Null keys are not allowed.
   *
   * @param map The data for the {@code Row}.
   */
<span class="nc" id="L40">  public Row(Map&lt;String, Object&gt; map, int extraCapacity) {</span>
<span class="nc" id="L41">    Check.notNull(map, &quot;data&quot;);</span>
<span class="nc" id="L42">    Check.that(extraCapacity, &quot;extraCapacity&quot;).isNot(negative());</span>
<span class="nc" id="L43">    int cap = 1 + ((map.size() + extraCapacity) * 4 / 3);</span>
<span class="nc" id="L44">    LinkedHashMap&lt;String, Object&gt; m = new LinkedHashMap&lt;&gt;(cap);</span>
<span class="nc" id="L45">    map.forEach(</span>
        (k, v) -&gt; {
<span class="nc" id="L47">          Check.that(k).is(notNull(), &quot;Map must not contain null keys&quot;);</span>
<span class="nc" id="L48">          m.put(k, v);</span>
<span class="nc" id="L49">        });</span>
<span class="nc" id="L50">    this.map = m;</span>
<span class="nc" id="L51">  }</span>

  /**
   * Creates a new {@code Row} with enough capacity to contain the specified number
   * of &quot;columns&quot; (i&amp;#46;e&amp;#46; map keys).
   *
   * @param columnCount
   */
<span class="nc" id="L59">  public Row(int columnCount) {</span>
<span class="nc" id="L60">    map = new LinkedHashMap&lt;&gt;(1 + (columnCount * 4 / 3));</span>
<span class="nc" id="L61">  }</span>

  /**
   * Returns the number of columns in the {@code Row}.
   *
   * @return The number of columns in the {@code Row}
   */
  public int size() {
<span class="nc" id="L69">    return map.size();</span>
  }

  /**
   * Returns the name of the column at the specified index.
   *
   * @param colNum The column number (zero-based) (zero-based)
   * @return The column name
   */
  public String getColumnName(int colNum) {
    // TODO
    //Check.that(colNum).is(inRange(), from(0, map.size()), ERR2, colNum);
<span class="nc" id="L81">    return (String) map.keySet().toArray()[colNum];</span>
  }

  /**
   * Returns the (zero-based) index of the column with the specified name.
   *
   * @param colName The column name
   * @return The column number (zero-based) (zero-based)
   */
  public int getColumnNumber(String colName) {
<span class="nc" id="L91">    Check.notNull(colName).is(keyIn(), map, ERR0, colName).ok(map::get);</span>
<span class="nc" id="L92">    return List.copyOf(map.keySet()).indexOf(colName);</span>
  }

  /**
   * Returns an unmodifiable {@code Set} containing the column names.
   *
   * @return An unmodifiable {@code Set} containing the column names
   */
  public Set&lt;String&gt; getColumnNames() {
<span class="nc" id="L101">    return Collections.unmodifiableSet(map.keySet());</span>
  }

  /**
   * Returns whether or not the row contains a column with the specified name.
   *
   * @param colName The column name
   * @return Whether or not the row contains a column with the specified name
   */
  public boolean hasColumn(String colName) {
<span class="nc" id="L111">    return map.containsKey(colName);</span>
  }

  /**
   * Returns an unmodifiable {@code Map} containing the column-name-to-column-value
   * mappings.
   *
   * @return An unmodifiable {@code Map} containing the column-name-to-column-value
   *     mappings
   */
  public Map&lt;String, Object&gt; toMap() {
<span class="nc" id="L122">    return Collections.unmodifiableMap(map);</span>
  }

  /**
   * Returns the value of the column with the specified name.
   *
   * @param colName The column name
   * @return The value
   */
  public Object getValue(String colName) {
<span class="nc" id="L132">    return Check.notNull(colName, &quot;colName&quot;)</span>
<span class="nc" id="L133">        .is(keyIn(), map, ERR0, colName)</span>
<span class="nc" id="L134">        .ok(map::get);</span>
  }

  /**
   * Returns the value of the column at the specified index.
   *
   * @param colNum The column number
   * @return The value
   */
  public Object getValue(int colNum) {
<span class="nc" id="L144">    return map.get(getColumnName(colNum));</span>
  }

  /**
   * Returns the value of the column with the specified name, casting it to the
   * specified type.
   *
   * @param &lt;T&gt; The type to cast the value to
   * @param colName The column name
   * @return The value
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  public &lt;T&gt; T get(String colName) {
<span class="nc" id="L157">    return (T) getValue(colName);</span>
  }

  /**
   * Returns the value of the column at the specified index, casting it to the
   * specified type.
   *
   * @param &lt;T&gt; The type to cast the value to
   * @param colNum The column number
   * @return The value
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  public &lt;T&gt; T get(int colNum) {
<span class="nc" id="L170">    return (T) getValue(colNum);</span>
  }

  /**
   * Returns the value of the specified column as a {@code String}.
   *
   * @param colName The column name
   * @return A {@code String} representation of the value
   */
  public String getString(String colName) {
<span class="nc" id="L180">    return ifNotNull(getValue(colName), Object::toString);</span>
  }

  /**
   * Returns the value of the specified column as a {@code String}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code String} representation of the value
   */
  public String getString(int colNum) {
<span class="nc" id="L190">    return ifNotNull(getValue(colNum), Object::toString);</span>
  }

  /**
   * Returns the value of the specified column as a {@code String}, or 0 (zero) if
   * the value was {@code null}.
   *
   * @param colName The column name
   * @return An {@code int} representation of the value
   */
  public int getInt(String colName) {
<span class="nc" id="L201">    return getInt(colName, 0);</span>
  }

  /**
   * Returns the value of the specified column as an {@code int}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return An {@code int} representation of the value
   */
  public int getInt(int colNum) {
<span class="nc" id="L212">    return getInt(colNum, 0);</span>
  }

  /**
   * Returns the value of the specified column as an {@code int}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colName The column name
   * @return An {@code int} representation of the value
   */
  public int getInt(String colName, int nullValue) {
<span class="nc" id="L223">    Object v = getValue(colName);</span>
<span class="nc bnc" id="L224" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colName, v, Integer.class);</span>
  }

  /**
   * Returns the value of the specified column as an {@code int}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colNum The column int
   * @param nullValue The value to return if the column values was {@code null}
   * @return An {@code int} representation of the value
   */
  public int getInt(int colNum, int nullValue) {
<span class="nc" id="L236">    Object v = getValue(colNum);</span>
<span class="nc bnc" id="L237" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colNum, v, Integer.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code double}, or 0 (zero) if
   * the value was {@code null}.
   *
   * @param colName The column name
   * @return An {@code int} representation of the value
   */
  public double getDouble(String colName) {
<span class="nc" id="L248">    return getDouble(colName, 0);</span>
  }

  /**
   * Returns the value of the specified column as a {@code double}, or 0 (zero) if
   * the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return An {@code int} representation of the value
   */
  public double getDouble(int colNum) {
<span class="nc" id="L259">    return getDouble(colNum, 0);</span>
  }

  /**
   * Returns the value of the specified column as a {@code double}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code double} representation of the value
   */
  public double getDouble(String colName, double nullValue) {
<span class="nc" id="L270">    Object v = getValue(colName);</span>
<span class="nc bnc" id="L271" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colName, v, Double.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code double}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code double} representation of the value
   */
  public double getDouble(int colNum, double nullValue) {
<span class="nc" id="L282">    Object v = getValue(colNum);</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colNum, v, Double.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code float}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code float} representation of the value
   */
  public float getFloat(String colName) {
<span class="nc" id="L294">    return getFloat(colName, 0F);</span>
  }

  /**
   * Returns the value of the specified column as a {@code float}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code float} representation of the value
   */
  public float getFloat(int colNum) {
<span class="nc" id="L305">    return getFloat(colNum, 0F);</span>
  }

  /**
   * Returns the value of the specified column as a {@code float}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code float} representation of the value
   */
  public float getFloat(String colName, float nullValue) {
<span class="nc" id="L316">    Object v = getValue(colName);</span>
<span class="nc bnc" id="L317" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colName, v, Float.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code float}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code float} representation of the value
   */
  public float getFloat(int colNum, float nullValue) {
<span class="nc" id="L328">    Object v = getValue(colNum);</span>
<span class="nc bnc" id="L329" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colNum, v, Float.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code long}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code long} representation of the value
   */
  public long getLong(String colName) {
<span class="nc" id="L340">    return getLong(colName, 0L);</span>
  }

  /**
   * Returns the value of the specified column as a {@code long}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code long} representation of the value
   */
  public long getLong(int colNum) {
<span class="nc" id="L351">    return getLong(colNum, 0L);</span>
  }

  /**
   * Returns the value of the specified column as a {@code long}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code long} representation of the value
   */
  public long getLong(String colName, long nullValue) {
<span class="nc" id="L362">    Object v = getValue(colName);</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colName, v, Long.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code long}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code long} representation of the value
   */
  public long getLong(int colNum, long nullValue) {
<span class="nc" id="L374">    Object v = getValue(colNum);</span>
<span class="nc bnc" id="L375" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colNum, v, Long.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code short}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code short} representation of the value
   */
  public short getShort(String colName) {
<span class="nc" id="L386">    return getShort(colName, (short) 0);</span>
  }

  /**
   * Returns the value of the specified column as a {@code short}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code short} representation of the value
   */
  public short getShort(int colNum) {
<span class="nc" id="L397">    return getShort(colNum, (short) 0);</span>
  }

  /**
   * Returns the value of the specified column as a {@code short}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colName The column name
   * @param nullValue The value to return if the column values was {@code null}
   * @return A {@code short} representation of the value
   */
  public short getShort(String colName, short nullValue) {
<span class="nc" id="L409">    Object v = getValue(colName);</span>
<span class="nc bnc" id="L410" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colName, v, Short.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code short}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @param nullValue The value to return if the column values was {@code null}
   * @return A {@code short} representation of the value
   */
  public short getShort(int colNum, short nullValue) {
<span class="nc" id="L422">    Object v = getValue(colNum);</span>
<span class="nc bnc" id="L423" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colNum, v, Short.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code byte}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code byte} representation of the value
   */
  public byte getByte(String colName) {
<span class="nc" id="L434">    return getByte(colName, (byte) 0);</span>
  }

  /**
   * Returns the value of the specified column as a {@code byte}, or 0 (zero) if the
   * value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code byte} representation of the value
   */
  public byte getByte(int colNum) {
<span class="nc" id="L445">    return getByte(colNum, (byte) 0);</span>
  }

  /**
   * Returns the value of the specified column as a {@code byte}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colName The column name
   * @param nullValue The value to return if the column values was {@code null}
   * @return A {@code byte} representation of the value
   */
  public byte getByte(String colName, byte nullValue) {
<span class="nc" id="L457">    Object v = getValue(colName);</span>
<span class="nc bnc" id="L458" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colName, v, Byte.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code byte}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @param nullValue The value to return if the column values was {@code null}
   * @return A {@code byte} representation of the value
   */
  public byte getByte(int colNum, byte nullValue) {
<span class="nc" id="L470">    Object v = getValue(colNum);</span>
<span class="nc bnc" id="L471" title="All 2 branches missed.">    return v == null ? nullValue : getNumber(colNum, v, Byte.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code boolean}, or {@code false}
   * if the value was {@code null}.
   *
   * @param colName The column name
   * @return An {@code int} representation of the value
   */
  public boolean getBoolean(String colName) {
<span class="nc" id="L482">    return getBoolean(colName, false);</span>
  }

  /**
   * Returns the value of the specified column as a {@code boolean}, or {@code false}
   * if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return An {@code int} representation of the value
   */
  public boolean getBoolean(int colNum) {
<span class="nc" id="L493">    return getBoolean(colNum, false);</span>
  }

  /**
   * Returns the value of the specified column as a {@code boolean}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colName The column name
   * @param nullValue The value to return if the column values was {@code null}
   * @return A {@code boolean} representation of the value
   */
  public boolean getBoolean(String colName, boolean nullValue) {
<span class="nc" id="L505">    return ifNotNull(getValue(colName), Bool::from, nullValue);</span>
  }

  /**
   * Returns the value of the specified column as a {@code boolean}, or
   * {@code nullValue} if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @param nullValue The value to return if the column values was {@code null}
   * @return A {@code boolean} representation of the value
   */
  public boolean getBoolean(int colNum, boolean nullValue) {
<span class="nc" id="L517">    return ifNotNull(getValue(colNum), Bool::from, nullValue);</span>
  }

  /**
   * Return the value of the specified column as an {@code Integer}.
   *
   * @param colName The column name
   * @return An {@code Integer} representation of the value
   */
  public Integer getInteger(String colName) {
<span class="nc" id="L527">    return getNullableNumber(colName, Integer.class);</span>
  }

  /**
   * Return the value of the specified column as an {@code Integer}.
   *
   * @param colNum The column number (zero-based)
   * @return An {@code Integer} representation of the value
   */
  public Integer getInteger(int colNum) {
<span class="nc" id="L537">    return getNullableNumber(colNum, Integer.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Double}.
   *
   * @param colName The column name
   * @return A {@code Double} representation of the value
   */
  public Double getDoubleObj(String colName) {
<span class="nc" id="L547">    return getNullableNumber(colName, Double.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Double}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code Double} representation of the value
   */
  public Double getDoubleObj(int colNum) {
<span class="nc" id="L557">    return getNullableNumber(colNum, Double.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Float}.
   *
   * @param colName The column name
   * @return A {@code Float} representation of the value
   */
  public Float getFloatObj(String colName) {
<span class="nc" id="L567">    return getNullableNumber(colName, Float.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Float}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code Float} representation of the value
   */
  public Float getFloatObj(int colNum) {
<span class="nc" id="L577">    return getNullableNumber(colNum, Float.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Long}.
   *
   * @param colName The column name
   * @return A {@code Long} representation of the value
   */
  public Long getLongObj(String colName) {
<span class="nc" id="L587">    return getNullableNumber(colName, Long.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Long}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code Long} representation of the value
   */
  public Long getLongObj(int colNum) {
<span class="nc" id="L597">    return getNullableNumber(colNum, Long.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Short}.
   *
   * @param colName The column name
   * @return A {@code Short} representation of the value
   */
  public Short getShortObj(String colName) {
<span class="nc" id="L607">    return getNullableNumber(colName, Short.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Short}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code Short} representation of the value
   */
  public Short getShortObj(int colNum) {
<span class="nc" id="L617">    return getNullableNumber(colNum, Short.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Byte}.
   *
   * @param colName The column name
   * @return A {@code Byte} representation of the value
   */
  public Byte getByteObj(String colName) {
<span class="nc" id="L627">    return getNullableNumber(colName, Byte.class);</span>
  }

  /**
   * Return the value of the specified column as a {@code Byte}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code Byte} representation of the value
   */
  public Byte getByteObj(int colNum) {
<span class="nc" id="L637">    return getNullableNumber(colNum, Byte.class);</span>
  }

  /**
   * Returns the value of the specified column as a {@code Boolean}.
   *
   * @param colName The column name
   * @return A {@code boolean} representation of the value
   */
  public Boolean getBooleanObj(String colName) {
<span class="nc" id="L647">    return ifNotNull(getValue(colName), Bool::from);</span>
  }

  /**
   * Returns the value of the specified column as a {@code Boolean}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code Boolean} representation of the value
   */
  public Boolean getBooleanObj(int colNum) {
<span class="nc" id="L657">    return ifNotNull(getValue(colNum), Bool::from);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} of the specified
   * type.
   *
   * @param &lt;T&gt; The type of the {@code enum} class
   * @param colName The column name
   * @return A {@code Boolean} representation of the value
   */
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(String colName, Class&lt;T&gt; enumClass) {
<span class="nc" id="L669">    return getEnum(colName, enumClass, null);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} of the specified
   * type.
   *
   * @param &lt;T&gt; The type of the {@code enum} class
   * @param colNum The column number (zero-based)
   * @return A {@code Boolean} representation of the value
   */
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(int colNum, Class&lt;T&gt; enumClass) {
<span class="nc" id="L681">    return getEnum(colNum, enumClass, null);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} of the specified
   * type, or {@code nullValue} if the value was {@code null}.
   *
   * @param &lt;T&gt; The type of the {@code enum} class
   * @param colName The column name
   * @return A {@code Boolean} representation of the value
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(String colName,
      Class&lt;T&gt; enumClass,
      Enum&lt;T&gt; nullValue) {
<span class="nc" id="L696">    return (T) ifNotNull(getValue(colName), enumClass::cast, nullValue);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} of the specified
   * type, or {@code nullValue} if the value was {@code null}.
   *
   * @param &lt;T&gt; The type of the {@code enum} class
   * @param colNum The column number (zero-based)
   * @return A {@code Boolean} representation of the value
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(int colNum,
      Class&lt;T&gt; enumClass,
      Enum&lt;T&gt; nullValue) {
<span class="nc" id="L711">    return (T) ifNotNull(getValue(colNum), enumClass::cast, nullValue);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} using the specified
   * function to parse the value into an {@code enum} constant.
   *
   * @param &lt;T&gt; The type of the {@code enum} class
   * @param colName The column name
   * @return A {@code Boolean} representation of the value
   */
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(String colName, Function&lt;Object, T&gt; parser) {
<span class="nc" id="L723">    return getEnum(colName, parser, null);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} using the specified
   * function to parse the value into an {@code enum} constant.
   *
   * @param &lt;T&gt; The type of the {@code enum} class
   * @param colNum The column number (zero-based)
   * @return A {@code Boolean} representation of the value
   */
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(int colNum, Function&lt;Object, T&gt; parser) {
<span class="nc" id="L735">    return getEnum(colNum, parser, null);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} using the specified
   * function to parse the value into an {@code enum} constant, or {@code nullValue}
   * if the value was {@code null}.
   *
   * @param colName The column name
   * @return A {@code Boolean} representation of the value
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(
      String colName, Function&lt;Object, T&gt; parser, Enum&lt;T&gt; nullValue) {
<span class="nc" id="L749">    return (T) ifNotNull(getValue(colName), parser::apply, nullValue);</span>
  }

  /**
   * Returns the value of the specified column as an {@code enum} using the specified
   * function to parse the value into an {@code enum} constant, or {@code nullValue}
   * if the value was {@code null}.
   *
   * @param colNum The column number (zero-based)
   * @return A {@code Boolean} representation of the value
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  public &lt;T extends Enum&lt;T&gt;&gt; T getEnum(int colNum,
      Function&lt;Object, T&gt; parser,
      Enum&lt;T&gt; nullValue) {
<span class="nc" id="L764">    return (T) ifNotNull(getValue(colNum), parser::apply, nullValue);</span>
  }

  /**
   * Updates the value of the column with the specified name.
   *
   * @param colName The column name
   * @param value The new value
   */
  public void setColumn(String colName, Object value) {
<span class="nc" id="L774">    Check.notNull(colName, &quot;colName&quot;).is(keyIn(), map, ERR0, colName);</span>
<span class="nc" id="L775">    map.put(colName, value);</span>
<span class="nc" id="L776">  }</span>

  /**
   * Updates the value of the column at the specified index.
   *
   * @param colNum The column number (zero-based)
   * @param value The new value
   */
  public void setColumn(int colNum, Object value) {
<span class="nc" id="L785">    map.put(getColumnName(colNum), value);</span>
<span class="nc" id="L786">  }</span>

  /**
   * Appends a new column to the row.
   *
   * @param colName The name of the new column
   * @param value The value of the new column
   */
  public void addColumn(String colName, Object value) {
<span class="nc" id="L795">    Check.notNull(colName, &quot;colName&quot;).isNot(keyIn(), map, ERR3, colName);</span>
<span class="nc" id="L796">    map.put(colName, value);</span>
<span class="nc" id="L797">  }</span>

  /**
   * Updates or appends a column, depending on whether the column with the specified
   * name exists.
   *
   * @param colName The name of the column to update or append
   * @param value The new value
   */
  public void setOrAddColumn(String colName, Object value) {
<span class="nc" id="L807">    Check.notNull(colName, &quot;colName&quot;);</span>
<span class="nc" id="L808">    map.put(colName, value);</span>
<span class="nc" id="L809">  }</span>

  @Override
  public int hashCode() {
<span class="nc" id="L813">    return map.hashCode();</span>
  }

  @Override
  public boolean equals(Object obj) {
<span class="nc bnc" id="L818" title="All 2 branches missed.">    if (this == obj) {</span>
<span class="nc" id="L819">      return true;</span>
<span class="nc bnc" id="L820" title="All 4 branches missed.">    } else if (obj == null || getClass() != obj.getClass()) {</span>
<span class="nc" id="L821">      return false;</span>
    }
<span class="nc bnc" id="L823" title="All 2 branches missed.">    if (getClass() != obj.getClass()) {</span>
<span class="nc" id="L824">      return false;</span>
    }
<span class="nc" id="L826">    Row other = (Row) obj;</span>
<span class="nc" id="L827">    return map.equals(other.map);</span>
  }

  @Override
  public String toString() {
<span class="nc" id="L832">    return map.toString();</span>
  }

  private static &lt;T extends Number&gt; T getNumber(int colNum,
      Object val,
      Class&lt;T&gt; targetType) {
<span class="nc" id="L838">    return getNumber(String.valueOf(colNum), val, targetType);</span>
  }

  private static &lt;T extends Number&gt; T getNumber(String colName,
      Object val,
      Class&lt;T&gt; targetType) {
<span class="nc bnc" id="L844" title="All 2 branches missed.">    if (val instanceof Number) {</span>
<span class="nc" id="L845">      return NumberMethods.convert((Number) val, targetType);</span>
<span class="nc bnc" id="L846" title="All 2 branches missed.">    } else if (val.getClass() == String.class) {</span>
<span class="nc" id="L847">      return NumberMethods.parse((String) val, targetType);</span>
    }
<span class="nc" id="L849">    return Check.fail(ERR1, colName, targetType, val);</span>
  }

  private &lt;T extends Number&gt; T getNullableNumber(int colNum, Class&lt;T&gt; targetType) {
<span class="nc" id="L853">    return getNullableNumber(String.valueOf(colNum), getValue(colNum), targetType);</span>
  }

  private &lt;T extends Number&gt; T getNullableNumber(String colName,
      Class&lt;T&gt; targetType) {
<span class="nc" id="L858">    return getNullableNumber(colName, getValue(colName), targetType);</span>
  }

  private static &lt;T extends Number&gt; T getNullableNumber(
      String col, Object val, Class&lt;T&gt; targetType) {
<span class="nc bnc" id="L863" title="All 2 branches missed.">    if (val == null) {</span>
<span class="nc" id="L864">      return null;</span>
<span class="nc bnc" id="L865" title="All 2 branches missed.">    } else if (val instanceof Number) {</span>
<span class="nc" id="L866">      return NumberMethods.convert((Number) val, targetType);</span>
<span class="nc bnc" id="L867" title="All 2 branches missed.">    } else if (val.getClass() == String.class) {</span>
<span class="nc" id="L868">      return NumberMethods.parse((String) val, targetType);</span>
    }
<span class="nc" id="L870">    return Check.fail(ERR1, col, targetType, val);</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>