<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Sat Feb 03 08:15:47 CET 2024 -->
<title>org.klojang.jdbc (Klojang JDBC)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-02-03">
<meta name="description" content="declaration: module: org.klojang.jdbc">
<meta name="generator" content="javadoc/ModuleWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="module-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li class="nav-bar-cell1-rev">Module</li>
<li><a href="org/klojang/jdbc/package-summary.html">Package</a></li>
<li>Class</li>
<li>Use</li>
<li><a href="org/klojang/jdbc/package-tree.html">Tree</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html#module">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Module:</p>
<ul>
<li><a href="#module-description">Description</a></li>
<li>Modules</li>
<li><a href="#packages-summary">Packages</a></li>
<li>Services</li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Module:&nbsp;</li>
<li><a href="#module-description">Description</a>&nbsp;|&nbsp;</li>
<li>Modules&nbsp;|&nbsp;</li>
<li><a href="#packages-summary">Packages</a>&nbsp;|&nbsp;</li>
<li>Services</li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Module org.klojang.jdbc" class="title">Module org.klojang.jdbc</h1>
</div>
<hr>
<div class="module-signature">module <span class="element-name">org.klojang.jdbc</span></div>
<section class="module-description" id="module-description">
<!-- ============ MODULE DESCRIPTION =========== -->
<div class="block"><p><i>Klojang JDBC</i> is a thin, non-intrusive abstraction layer around standard JDBC
 that builds on
 <a href="https://klojang4j.github.io/klojang-templates/1/api">Klojang Templates</a> to
 provide functionality not commonly found in JDBC extension libraries. These are its
 main features:

 <ol>
   <li>Convert <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link"><code>ResultSet</code></a> rows into JavaBeans or
   <code>Map&lt;String, Object&gt;</code> pseudo-objects. There is not pretense at all of providing
   full-fledged ORM functionality. The rows are converted to "flat" beans or maps. The
   type of the JavaBean may have additional structure, but only top-level properties are
   populated.
   <li>Enable parametrization of parts of SQL that cannot be parametrized using
   <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/PreparedStatement.html" title="class or interface in java.sql" class="external-link">prepared statements</a> alone.
   <i>Klojang JDBC</i> allows you to do this without exposing yourself to the
   dangers of SQL Injection.
   <li>Special attention has been paid to persisting Java objects in potentially very
   large batches.
 </ol>

 <p>Here is an example that goes full-circle from INSERT to SELECT:

 <blockquote><pre><code>
 Connection con = ... // get/create JDBC Connection

 String sql = """
      CREATE TABLE PERSON(
          PERSON_ID INT AUTO_INCREMENT,
          FIRST_NAME VARCHAR(255),
          LAST_NAME VARCHAR(255),
          BIRTH_DATE DATE)
      """;
 SQL.simple(sql).session(con).execute();

 List&lt;Person&gt; persons = List.of(
    new Person("John", "Smith", LocalDate.of(1960, 4, 15)),
    new Person("Mary", "Smith", LocalDate.of(1980, 10, 5)),
    new Person("Joan", "de Santos", LocalDate.of(1977, 5, 23)),
    new Person("Jill", "Kriel", LocalDate.of(1977, 2, 10)),
    new Person("Stephen", "Bester", LocalDate.of(2001, 2, 8)),
    new Person("Carlos", "Smith", LocalDate.of(2004, 2, 8)),
    new Person("Mary", "Bear", LocalDate.of(1956, 11, 7)),
    new Person("Dieter", "Washington", LocalDate.of(1989, 2, 4)),
    new Person("Peter", "Peterson", LocalDate.of(1963, 5, 3)),
    new Person("Joe", "Peterson", LocalDate.of(1998, 9, 23))
 );

 SQLBatchInsert bi = SQL.prepareBatchInsert()
    .of(Person.class)
    .into("PERSON")
    .excluding("personId")
    .withNameMapper(new CamelCaseToSnakeUpperCase())
    .prepare(con);
 bi.insertBatchAndSetIDs("personId", persons);

 sql = """
    SELECT * FROM PERSON
     WHERE LAST_NAME = :lastName
     ORDER BY ~%column% ~%direction%
    """;

 try(SQLSession session = SQL.template(sql).session(con)) {
   session.set("column", "LAST_NAME").set("direction", "DESC");
   try (SQLQuery query = session.prepareQuery()) {
    List&lt;Person&gt; persons = query
        .withNameMapper(new SnakeCaseToCamelCase())
        .bind("lastName", "Smith")
        .getBeanifier(Person.class)
        .beanifyAll();
    for (Person person : persons) {
      System.out.println(person);
    }
  }
 }

 </code></pre></blockquote></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="https://klojang4j.github.io/klojang-templates/api/org.klojang.templates/org/klojang/templates/name/SnakeCaseToCamelCase.html" title="class or interface in org.klojang.templates.name" class="external-link"><code>SnakeCaseToCamelCase</code></a></li>
<li><a href="https://klojang4j.github.io/klojang-templates/api/org.klojang.templates/org/klojang/templates/name/CamelCaseToSnakeUpperCase.html" title="class or interface in org.klojang.templates.name" class="external-link"><code>CamelCaseToSnakeUpperCase</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<section class="packages-summary" id="packages-summary">
<!-- ============ PACKAGES SUMMARY =========== -->
<h2>Packages</h2>
<div id="package-summary-table">
<div class="caption"><span>Exports</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color package-summary-table package-summary-table-tab1"><a href="org/klojang/jdbc/package-summary.html">org.klojang.jdbc</a></div>
<div class="col-last even-row-color package-summary-table package-summary-table-tab1">
<div class="block">Database utilities aimed at providing a quick route for database data to be inserted into Klojang
 templates.</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024 <a href="http://www.naturalis.nl">Naturalis Biodiversity Center</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
